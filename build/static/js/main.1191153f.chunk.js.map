{"version":3,"sources":["components/Blog.js","components/BlogForm.js","components/Togglable.js","services/blogs.js","services/login.js","components/Notification.js","components/LoginForm.js","App.js","index.js"],"names":["Blog","_ref","blog","removeFunction","react_default","a","createElement","className","title","author","url","likes","name","value","id","onClick","BlogForm","titleHandler","authorHandler","likesHandler","urlHandler","addFunction","onSubmit","onChange","type","Togglable","React","forwardRef","props","ref","_useState","useState","_useState2","Object","slicedToArray","visible","setVisible","hideWhenVisible","display","showWhenVisible","toggleVisibility","useImperativeHandle","style","buttonLabel","children","token","services_blogs","getAll","axios","get","then","response","data","create","asyncToGenerator","regenerator_default","mark","_callee","newObject","config","wrap","_context","prev","next","headers","Authorization","post","sent","abrupt","stop","_x","apply","this","arguments","update","object","put","concat","remove","removeId","delete","setToken","newToken","services_login","login","credentials","ErrorNotification","message","SuccessNotification","_ref2","LoginForm","handleSubmit","handleUsernameChange","handlePasswordChange","username","password","App","blogs","setBlogs","_useState3","_useState4","newTitle","setNewTitle","_useState5","_useState6","newAuthor","setNewAuthor","_useState7","_useState8","newUrl","setNewUrl","_useState9","_useState10","newLikes","setNewLikes","_useState11","_useState12","errorMessage","setErrorMessage","_useState13","_useState14","successMessage","setSuccessMessage","_useState15","_useState16","setUsername","_useState17","_useState18","setPassword","_useState19","_useState20","user","setUser","_useState21","_useState22","loginVisible","setLoginVisible","blogFormRef","useRef","handleLogin","event","_user","preventDefault","console","log","loginService","window","localStorage","setItem","JSON","stringify","blogService","t0","setTimeout","handleLogout","_callee2","_context2","removeItem","_x2","useEffect","initialBlogs","loggedUserJSON","getItem","parse","removeBlog","confirm","target","filter","addBlog","current","blogObject","find","oldBlog","updatedBlogObject","catch","error","blogToRemove","index","indexOf","splice","returnedBlog","handleTitleChange","handleAuthorChange","handleUrlChange","handleLikesChange","Notification_ErrorNotification","Notification_SuccessNotification","components_LoginForm","loginForm","components_Togglable","components_BlogForm","map","components_Blog","key","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.1191153f.chunk.js","sourcesContent":["import React from 'react'\n\nconst Blog = ({ blog, removeFunction}) => {\n\n  return (\n    <div className = 'blog'>\n      <br></br>\n      <div>{blog.title}</div>\n      <div>{blog.author}</div>\n      <div>{blog.url}</div>\n      <div>{blog.likes}</div>\n      <button name = {blog.title} value={blog.id} onClick={removeFunction}> Delete</button>\n    </div>\n  )\n}\n\nexport default Blog","import React from 'react'\n\nconst BlogForm = ({title, author, likes, url, titleHandler, authorHandler, likesHandler, urlHandler, addFunction}) => {\n  return (\n    <form onSubmit={addFunction}>\n        <div>Blog title:  </div>\n        <input\n          value={title}\n          onChange={titleHandler}\n        />\n        <div>Author: </div>\n        <input\n          value={author}\n          onChange={authorHandler}\n        />\n        <div>Blog url:  </div>\n        <input\n          value={url}\n          onChange={urlHandler}\n        />\n        <div>likes: </div>\n        <input\n          value={likes}\n          onChange={likesHandler}\n        />\n        <div>\n          <button type=\"submit\">tallenna</button>\n        </div>\n      </form>\n  )\n}\n\nexport default BlogForm","import React, { useState, useImperativeHandle  } from 'react'\r\n\r\n  const Togglable = React.forwardRef((props, ref) => {\r\n  const [visible, setVisible] = useState(false)\r\n  const hideWhenVisible = { display: visible ? 'none' : '' }\r\n  const showWhenVisible = { display: visible ? '' : 'none' }\r\n\r\n  const toggleVisibility = () => {\r\n    setVisible(!visible)\r\n  }\r\n  useImperativeHandle(ref, () =>  {\r\n    return {\r\n        toggleVisibility    \r\n    }\r\n  })\r\n  return (\r\n    <div>\r\n      <div style={hideWhenVisible}>\r\n        <button onClick={toggleVisibility}>{props.buttonLabel}</button>\r\n      </div>\r\n      <div style={showWhenVisible}>\r\n        {props.children}\r\n        <button onClick={toggleVisibility}>cancel</button>\r\n      </div>\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default Togglable","import axios from 'axios'\nconst baseUrl = '/api/blogs'\n\nlet token = null\nconst setToken = newToken => {  \n  token = `bearer ${newToken}`\n}\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = async newObject => {\n\n  const config = {\n    headers: { Authorization: token },\n  }\n  const response = await axios.post(baseUrl, newObject, config)\n\n  return response.data\n}\n\nconst update = (id, object) => {\n  const request = axios.put(`${baseUrl}/${id}`, object)\n  return request.then(response => response.data)\n}\n\nconst remove = (removeId) => {\n    const request = axios.delete(`${baseUrl}/${removeId}`)\n    return request.then(response => response.data)\n}\n\nexport default { \n  getAll: getAll, \n  create: create, \n  update: update, \n  remove: remove,\n  setToken: setToken\n}\n","import axios from 'axios'\r\nconst baseUrl = '/api/login'\r\n\r\nconst login = async credentials => {\r\n  const response = await axios.post(baseUrl, credentials)\r\n  return response.data\r\n}\r\n\r\nexport default { login }","import React from 'react'\n\nconst ErrorNotification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n}\n\nconst SuccessNotification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"success\">\n      {message}\n    </div>\n  )\n}\n\nexport {ErrorNotification, SuccessNotification}","import React from 'react'\r\n\r\nconst LoginForm = ({\r\n    handleSubmit,\r\n    handleUsernameChange,\r\n    handlePasswordChange,\r\n    username,\r\n    password\r\n    }) => {\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n        <div>\r\n            username\r\n            <input \r\n                type=\"text\" \r\n                value={username} \r\n                name=\"Username\" \r\n                onChange={handleUsernameChange}\r\n            />\r\n        </div>\r\n        <div>\r\n            password\r\n            <input\r\n            type=\"password\"\r\n            value={password}\r\n            name=\"Password\"\r\n            onChange={handlePasswordChange}\r\n            />\r\n        </div>\r\n        <button type=\"submit\">login</button>\r\n    </form>\r\n    )\r\n}\r\nexport default LoginForm","import React, { useState, useRef, useEffect } from 'react'\nimport Blog from './components/Blog'\nimport BlogForm from './components/BlogForm'\nimport Togglable from './components/Togglable'\nimport blogService from './services/blogs'\nimport loginService from './services/login'\nimport {ErrorNotification, SuccessNotification} from './components/Notification'\nimport LoginForm from './components/LoginForm'\n\nconst App = () => {\n\n  const [blogs, setBlogs] = useState([]) \n  const [newTitle, setNewTitle ] = useState('')\n  const [newAuthor, setNewAuthor ] = useState('')\n  const [newUrl, setNewUrl ] = useState('')\n  const [newLikes, setNewLikes ] = useState('')\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [successMessage, setSuccessMessage] = useState(null)\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [user, setUser] = useState(null)\n  const [loginVisible, setLoginVisible] = useState(false)\n\n  const blogFormRef = useRef()\n\n  const handleLogin = async (event) => {\n    event.preventDefault()\n    console.log('logging in with', username, password)\n    try {\n      const user = await loginService.login({\n        username, password,\n      })\n\n      window.localStorage.setItem('loggedBlogappUser', JSON.stringify(user)) \n\n      blogService.setToken(user.token)\n      setUser(user)\n      setUsername('')\n      setPassword('')\n    } catch (exception) {\n      setErrorMessage('wrong credentials')\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n    }\n  }\n\n  const handleLogout = async (event) => {\n    event.preventDefault()\n    console.log('logging out: ', username)\n    window.localStorage.removeItem('loggedBlogappUser')\n  }\n\n  const logoutForm = () => (\n    <form onSubmit={handleLogout}>\n      <div>\n        <button type=\"submit\">logout</button>    \n      </div>\n    </form>\n  )\n\n  const blogForm = () => (\n    <BlogForm\n        title = {newTitle}\n        author = {newAuthor}\n        url = {newUrl}\n        likes = {newLikes}\n        titleHandler = {handleTitleChange}\n        authorHandler = {handleAuthorChange}\n        urlHandler = {handleUrlChange}\n        likesHandler = {handleLikesChange}\n        addFunction = {addBlog}\n      />\n  )\n  \n\n  const loginForm = () => {\n    const hideWhenVisible = { display: loginVisible ? 'none' : '' }\n    const showWhenVisible = { display: loginVisible ? '' : 'none' }\n\n    return (\n      <div>\n        <div style={hideWhenVisible}>\n          <button onClick={() => setLoginVisible(true)}>log in</button>\n        </div>\n        <div style={showWhenVisible}>\n          <LoginForm\n            username={username}\n            password={password}\n            handleUsernameChange={handleUsernameChange}\n            handlePasswordChange={handlePasswordChange}\n            handleSubmit={handleLogin}\n          />\n          <button onClick={() => setLoginVisible(false)}>cancel</button>\n        </div>\n      </div>\n    )\n  }\n\n  const rows = () => blogs.map(blog =>\n    <Blog\n      key={blog.id}\n      blog={blog}\n      removeFunction={removeBlog}\n    />\n  )  \n\n  useEffect(() => {\n    blogService\n      .getAll()\n        .then(initialBlogs => {\n        setBlogs(initialBlogs)\n    })\n  }, [])\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser')    \n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      setUser(user)\n      blogService.setToken(user.token)\n    }  }, [])\n\n  const removeBlog = (event) => {\n    event.preventDefault()\n    if(window.confirm(`Poistetaanko ${event.target.title}?`)){\n      blogService\n        .remove(event.target.value)\n          .then(setBlogs(blogs.filter(blog => blog.id !== event.target.value)))\n      setSuccessMessage(`${event.target.title} poistettiin tietokannasta.`)\n      setErrorMessage(null)\n    }\n  }\n\n  const addBlog = (event) => {\n    blogFormRef.current.toggleVisibility()\n    event.preventDefault()\n    const blogObject = {\n      title: newTitle,\n      author: newAuthor,\n      url: newUrl,\n      likes: newLikes\n    }\n    if(blogs.find(blog => blog.title === newTitle)){\n      const oldBlog = blogs.find(blog => blog.title === newTitle)\n      if(window.confirm(`${newTitle} on jo luettelossa. Haluatko korvata blogin?`)){\n            const updatedBlogObject = {\n              title: newTitle,\n              author: newAuthor,\n              url: newUrl,\n              likes: newLikes,\n              id: oldBlog.id\n            }\n      \n            blogService\n              .update(updatedBlogObject.id,updatedBlogObject)\n              .catch(error => {\n                setErrorMessage(`Blogi \"${updatedBlogObject.title}\" on jo poistettu palvelimelta.`)\n              })\n\n              const blogToRemove = blogs.find(blog => blog.id === updatedBlogObject.id)\n              const index = blogs.indexOf(blogToRemove)\n              blogs.splice(index,1,updatedBlogObject)\n              setNewTitle(\"\")\n              setNewAuthor(\"\")\n              setNewLikes(\"\")\n              setNewUrl(\"\")\n              setSuccessMessage(`Blogin \"${updatedBlogObject.title}\" tiedot päivitettiin.`)\n            }\n        }\n        else{\n          blogService\n            .create(blogObject)\n              .then(returnedBlog => {\n                setBlogs(blogs.concat(returnedBlog))\n                setNewTitle(\"\")\n                setNewAuthor(\"\")\n                setNewUrl(\"\")\n                setNewLikes(\"\")\n                setSuccessMessage(`${returnedBlog.title} lisättiin blogilistalle.`)\n              })\n              .catch(error => {\n                console.log(error.response.data)\n                setErrorMessage(error.response.data)\n              })\n        }\n  }\n\n  const handleUsernameChange = (event) => {\n    setUsername(event.target.value)\n  }\n  const handlePasswordChange = (event) => {\n    setPassword(event.target.value)\n  }\n  const handleTitleChange = (event) => {\n    setNewTitle(event.target.value)\n  }\n\n  const handleAuthorChange = (event) => {\n    setNewAuthor(event.target.value)\n  }\n\n  const handleUrlChange = (event) => {\n    setNewUrl(event.target.value)\n  }\n\n  const handleLikesChange = (event) => {\n    setNewLikes(event.target.value)\n  }\n\n  return (\n    <div>\n\n      <ErrorNotification message={errorMessage} />\n      <SuccessNotification message={successMessage} />\n\n      <h1>Blogilista</h1>  \n\n      {user === null ? \n        loginForm() : \n        <div>\n          <p>{user.name} logged in</p>\n          <Togglable buttonLabel=\"new blog\" ref={blogFormRef}>\n            {blogForm()}\n          </Togglable>\n          {logoutForm()}\n        </div>\n      }\n\n      {rows()}\n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nconsole.log(\"Rendering app.\")\nReactDOM.render(<App/>,document.getElementById('root'))"],"sourceRoot":""}